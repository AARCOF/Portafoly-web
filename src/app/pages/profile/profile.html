<div class="profile-container" *ngIf="user">
  <h2>Editar Perfil</h2>

  <div class="profile-info">
    <!-- Avatar -->
    <div class="avatar-section">
      <div class="avatar"></div>
      <button type="button">Cambiar foto</button>
    </div>

    <!-- Formulario -->
    <form (ngSubmit)="updateProfile()" #profileForm="ngForm">
      <div class="input-group">
        <input
          [(ngModel)]="user.firstName"
          name="firstName"
          placeholder="Nombre"
          required
        />
        <input
          [(ngModel)]="user.lastName"
          name="lastName"
          placeholder="Apellido"
          required
        />
      </div>

      <div class="input-group">
        <input
          [(ngModel)]="user.email"
          name="email"
          placeholder="Correo"
          disabled
        />
        <input
          [(ngModel)]="user.phone"
          name="phone"
          placeholder="Teléfono"
          required
        />
      </div>

      <div class="input-group">
        <input
          [(ngModel)]="user.profession"
          name="profession"
          placeholder="Profesión"
          required
        />
        <input
          type="date"
          [(ngModel)]="user.birthDate"
          name="birthDate"
          required
        />
      </div>

      <button type="submit">Guardar Cambios</button>
    </form>
  </div>

  <!-- HABILIDADES -->
  <div class="section">
    <h3>Habilidades (Skills)</h3>
    <div class="card-grid">
      <div class="skill-card" *ngFor="let skill of user.skills">
        {{ skill.name }}
        <button (click)="removeSkill(user.skills.indexOf(skill))">❌</button>
      </div>

      <!-- Botón agregar abre popup -->
      <div class="skill-card add-card" (click)="showSkillModal = true">+</div>
    </div>
  </div>

  <!-- IDIOMAS -->
  <div class="section">
    <h3>Idiomas (Languages)</h3>
    <div class="card-grid">
      <div class="skill-card" *ngFor="let lang of user.languages">
        {{ lang.name }}
        <button (click)="removeLanguage(user.languages.indexOf(lang))">
          ❌
        </button>
      </div>

      <!-- Botón agregar abre popup -->
      <div class="skill-card add-card" (click)="showLanguageModal = true">
        +
      </div>
    </div>
  </div>

  <!-- POPUP Añadir Skill -->
  <div class="custom-modal" *ngIf="showSkillModal">
    <div class="modal-box">
      <h4>Añadir Habilidad</h4>
      <input [(ngModel)]="newSkill" placeholder="Nueva habilidad" />
      <div class="modal-actions">
        <button (click)="showSkillModal = false">Cancelar</button>
        <button (click)="addSkill(); showSkillModal = false">Agregar</button>
      </div>
    </div>
  </div>

  <!-- POPUP Añadir Idioma -->
  <div class="custom-modal" *ngIf="showLanguageModal">
    <div class="modal-box">
      <h4>Añadir Idioma</h4>
      <input [(ngModel)]="newLanguage" placeholder="Nuevo idioma" />
      <div class="modal-actions">
        <button (click)="showLanguageModal = false">Cancelar</button>
        <button (click)="addLanguage(); showLanguageModal = false">
          Agregar
        </button>
      </div>
    </div>
  </div>
</div>
